<div class="panel-heading" style="font-family:Oswald , serif;"  ng-include="'js/system/header.html'"></div>
<div class="panel-body">
    <form name="outerForm" class="form-horizontal" ng-show="result == null">

        <div id="id-group" class="form-group">
            <label class="col-sm-2 control-label" for="id">Identificador:</label>
            <div class="control col-sm-3">
                <input ng-model="obj.id" type="text" id="id" class="form-control" name="id" size="15" placeholder="id" disabled="disabled">
            </div>
        </div>

        <div id="dni-group" 
             class="form-group"
             ng-class="{'has-error': (outerForm.dni.$error.required || outerForm.dni.$error.minlength) || outerForm.dni.$error.pattern && !outerForm.dni.$pristine}">
            <label class="col-sm-2 control-label" for="dni">DNI:</label>
            <div class="control col-sm-8">
                <input ng-model="obj.dni"  
                       type="text" 
                       id="dni" 
                       class="form-control" 
                       name="dni" 
                       size="9"                       
                       placeholder="dni" 
                       minlength="9"
                       maxlength="9"
                       required>
                <span ng-show="!outerForm.$pristine && outerForm.dni.$error.required">El campo dni es obligatorio</span>
                <span class="help-block" ng-show="!outerForm.dni.$pristine && outerForm.dni.$error.minlength">El campo dni debe tener al menos 9 caracteres</span>
                <span class="help-block" ng-show="!outerForm.dni.$pristine && outerForm.dni.$error.maxlength">El campo dni debe tener como máximo 9 caracteres</span>
            </div>
        </div>

        <div id="nombre-group" 
             class="form-group"
             ng-class="{'has-error': (outerForm.nombre.$error.required || outerForm.nombre.$error.minlength) || outerForm.nombre.$error.pattern && !outerForm.nombre.$pristine}">
            <label class="col-sm-2 control-label" for="nombre">Nombre:</label>
            <div class="control col-sm-8">
                <input ng-model="obj.nombre"  
                       type="text" 
                       id="nombre" 
                       class="form-control" 
                       name="nombre" 

                       ng-pattern="/^[a-zA-Z]*$/" 
                       placeholder="nombre" 
                       minlength="3"
                       maxlength="11"
                       required>
                <span ng-show="!outerForm.$pristine && outerForm.nombre.$error.required">El campo nombre es obligatorio</span>
                <span class="help-block" ng-show="!outerForm.nombre.$pristine && outerForm.nombre.$error.pattern">El campo nombre no puede tener ningún valor numérico</span>
                <span class="help-block" ng-show="!outerForm.nombre.$pristine && outerForm.nombre.$error.minlength">El campo nombre debe tener al menos 3 caracteres</span>
                <span class="help-block" ng-show="!outerForm.nombre.$pristine && outerForm.nombre.$error.maxlength">El campo nombre debe tener como máximo 200 caracteres</span>
            </div>
        </div>


        <div id="apellido1-group" 
             class="form-group"
             ng-class="{'has-error': (outerForm.apellido1.$error.required || outerForm.apellido1.$error.minlength) || outerForm.apellido1.$error.pattern && !outerForm.apellido1.$pristine}">
            <label class="col-sm-2 control-label" for="apellido1">Apellido1:</label>
            <div class="control col-sm-8">
                <input ng-model="obj.apellido1"  
                       type="text" 
                       id="apellido1" 
                       class="form-control" 
                       name="apellido1" 
                       size="15" 
                       ng-pattern="/^[a-zA-Z]*$/" 
                       placeholder="apellido1" 
                       minlength="3"
                       maxlength="200"
                       required>
                <span ng-show="!outerForm.$pristine && outerForm.apellido1.$error.required">El campo apellido1 es obligatorio</span>
                <span class="help-block" ng-show="!outerForm.apellido1.$pristine && outerForm.apellido1.$error.pattern">El campo apellido1 no puede tener ningún valor numérico</span>
                <span class="help-block" ng-show="!outerForm.apellido1.$pristine && outerForm.apellido1.$error.minlength">El campo apellido1 debe tener al menos 3 caracteres</span>
                <span class="help-block" ng-show="!outerForm.apellido1.$pristine && outerForm.apellido1.$error.maxlength">El campo apellido1 debe tener como máximo 200 caracteres</span>
            </div>
        </div>


        <div id="apellido2-group" 
             class="form-group"
             ng-class="{'has-error': (outerForm.apellido2.$error.required || outerForm.apellido2.$error.minlength) || outerForm.apellido2.$error.pattern && !outerForm.apellido2.$pristine}">
            <label class="col-sm-2 control-label" for="apellido2">Apellido2:</label>
            <div class="control col-sm-8">
                <input ng-model="obj.apellido2"  
                       type="text" 
                       id="apellido2" 
                       class="form-control" 
                       name="apellido2" 
                       size="15" 
                       ng-pattern="/^[a-zA-Z]*$/" 
                       placeholder="apellido2" 
                       minlength="3"
                       maxlength="200"
                       required>
                <span ng-show="!outerForm.$pristine && outerForm.apellido2.$error.required">El campo apellido2 es obligatorio</span>
                <span class="help-block" ng-show="!outerForm.apellido2.$pristine && outerForm.apellido2.$error.pattern">El campo apellido2 no puede tener ningún valor numérico</span>
                <span class="help-block" ng-show="!outerForm.apellido2.$pristine && outerForm.apellido2.$error.minlength">El campo apellido2 debe tener al menos 3 caracteres</span>
                <span class="help-block" ng-show="!outerForm.apellido2.$pristine && outerForm.apellido2.$error.maxlength">El campo apellido2 debe tener como máximo 200 caracteres</span>
            </div>
        </div>




        <div id="fnac-group" class="form-group">
            <label class="col-sm-2 control-label" for="fnac">Fecha de nacimiento:</label>
            <div class="control col-sm-3">
                <div class="input-group date" id="fnac_group">
                    <input type="text" class="form-control" starting-day="1" uib-datepicker-popup="dd/MM/yyyy" ng-model="obj.fnac" is-open="popup1.opened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions1" date-disabled="disabled(date, mode)" ng-required="true" close-text="Cerrar" alt-input-formats="altInputFormats" placeholder="Fecha de nacimiento" />
                    <span class="input-group-addon" ng-click="open1()">
                        <i class="glyphicon glyphicon-calendar"></i>
                    </span>
                </div>
            </div>
        </div>



        <div id="falta-group" class="form-group">
            <label class="col-sm-2 control-label" for="falta">Fecha de alta:</label>
            <div class="control col-sm-3">
                <div class="input-group date" id="falta_group">
                    <input type="text" class="form-control" starting-day="1" uib-datepicker-popup="dd/MM/yyyy" ng-model="obj.falta" is-open="popup2.opened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions2" date-disabled="disabled(date, mode)" ng-required="true" close-text="Cerrar" alt-input-formats="altInputFormats" placeholder="Fecha de alta" />
                    <span class="input-group-addon" ng-click="open2()">
                        <i class="glyphicon glyphicon-calendar"></i>
                    </span>
                </div>
            </div>
        </div>


        <div id="telefono-group" class="form-group"  
             ng-class="{'has-error': (outerForm.telefono.$error.required
                                 || outerForm.telefono.$error.minlength
                                 || outerForm.telefono.$error.maxlength
                                 || outerForm.telefono.$error.numbersOnly)
                                 || outerForm.telefono.$error.pattern
                                 && !outerForm.telefono.$pristine}">
            <label class="col-sm-2 control-label" for="telefono">Teléfono:</label>
            <div class="control col-sm-3">
                <input type="text" 
                       ng-model="obj.telefono"                     
                       id="telefono" 
                       class="form-control" 
                       name="telefono" 
                       size="9" 
                       placeholder="telefono"
                       ng-pattern="/^\d+$/"
                       numbersOnly
                       minlength="9"
                       maxlength="9"
                       required>
                <span class="help-block" ng-show="!outerForm.telefono.$pristine && outerForm.telefono.$error.required">El campo teléfono es obligatorio</span>
                <span class="help-block" ng-show="!outerForm.telefono.$pristine && outerForm.telefono.$error.pattern">El campo teléfono debe ser un número entero</span>                
                <span class="help-block" ng-show="!outerForm.telefono.$pristine && outerForm.telefono.$error.maxlength">El campo teléfono debe ser un número mínimo de 9 cifras</span>
            </div>
        </div>

        <div id="email-group" class="form-group"
             ng-class="{'has-error': (outerForm.email.$error.required
                                 || outerForm.email.$error.minlength)
                                 || outerForm.telefono.$error.pattern
                                 && !outerForm.email.$pristine}">
            <label class="col-sm-2 control-label" for="email">Email:</label>
            <div class="control col-sm-3">
                <input ng-model="obj.email"
                       type="text"                      
                       id="email" 
                       class="form-control" 
                       name="email" 
                       size="100" 
                       placeholder="email"
                       ng-pattern="/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/"
                       minlength="5"
                       required>
                <span class="help-block" ng-show="!outerForm.email.$pristine && outerForm.email.$error.required">El campo email es obligatorio</span>
                <span class="help-block" ng-show="!outerForm.email.$pristine && outerForm.email.$error.pattern">El campo email debe ser  con @ y .</span>     
                <span class="help-block" ng-show="!outerForm.email.$pristine && outerForm.email.$error.minlength">El campo email debe ser  mayor de cinco caracteres .</span>                
            </div>
        </div>



        <div class="form-group">
            <label class="col-sm-2 control-label" for="obj_empresa">Empresa:</label>
            <div class="control col-sm-3">
                <div class="input-group foreign" id="obj_empresa_group">
                    <span class="input-group-addon" id="obj_empresa_button">
                        <span class="glyphicon glyphicon-search" ng-click="chooseOne('empresa')">
                        </span>
                    </span>
                    <input ng-model="obj.obj_empresa.id" readonly="true" aria-describedby="basic-addon2" class="form-control" id="obj_empresa" name="obj_empresa" type="text" size="5" maxlength="5">
                    <span class="input-group-addon">
                        <a href="#/empresa/view/{{obj.obj_empresa.id}}">
                            <span>{{obj.obj_empresa.nombre}}</span>     
                        </a>       
                    </span>
                </div>
            </div>            
        </div>



        <div class="form-group">
            <label class="col-sm-2 control-label" for="obj_centro">Centro:</label>
            <div class="control col-sm-3">
                <div class="input-group foreign" id="obj_centro_group">
                    <span class="input-group-addon" id="obj_centro_button">
                        <span class="glyphicon glyphicon-search" ng-click="chooseOne('centro')">
                        </span>
                    </span>
                    <input ng-model="obj.obj_centro.id" readonly="true" aria-describedby="basic-addon2" class="form-control" id="obj_centro" name="obj_centro" type="text" size="5" maxlength="5">
                    <span class="input-group-addon">
                        <a href="#/centro/view/{{obj.obj_centro.id}}">
                            <span>{{obj.obj_centro.nombre}}</span>     
                        </a>  


                    </span>
                </div>
            </div>            
        </div>


        <div class="form-group">
            <label class="col-sm-2 control-label" for="obj_cuota">Cuota:</label>
            <div class="control col-sm-3">
                <div class="input-group foreign" id="obj_cuota_group">
                    <span class="input-group-addon" id="obj_cuota_button">
                        <span class="glyphicon glyphicon-search" ng-click="chooseOne('cuota')">
                        </span>
                    </span>
                    <input ng-model="obj.obj_cuota.id" readonly="true" aria-describedby="basic-addon2" class="form-control" id="obj_cuota" name="obj_cuota" type="text" size="5" maxlength="5">
                    <span class="input-group-addon">
                        <a href="#/cuota/view/{{obj.obj_cuota.id}}">
                            <span>{{obj.obj_cuota.tipocuota}}</span>     
                        </a>     
                    </span>
                </div>
            </div>            
        </div>


        <div class="control-group text-right">
            <div class="controls">
                <a class="btn btn-primary" ng-click="save()" ng-disabled="!outerForm.$valid">Guardar</a>
                <a class="btn btn-default" ng-click="plist()">Ir al listado de afiliados</a>
                <a class="btn btn-default" ng-click="close()">Cerrar</a>
            </div>
        </div>
    </form>
    <div ng-show="result != null">    
        <div class="alert alert-success" ng-show="result.status == 200">
            <h2>Se ha modificado el registro</h2>
            <a ng-href="#/afiliado/view/{{id}}">Ver el registro modificado</a>
        </div>
        <div class="alert alert-danger" ng-show="result.status != 200">
            <h2>Error al modificar la afiliado: no se ha modificado el afiliado</h2>
            <h3>Código: {{result.status}}</h3>
            <h3>Mensaje: {{result.message}}</h3>             
        </div>
    </div>
</div>
<div class="panel-footer" style="font-family: Questrial, serif;" ng-include="'js/system/footer.html'"></div>
